{% extends 'base.html' %}
{% block title %}编辑剧目{% endblock %}
{% block bodytitle %}
    <span class="glyphicon glyphicon-list">编辑剧目</span>

{% endblock %}
{% block content %}
    <hr>
                <form name="play_edit_form" class="form-horizontal style-form" method="post"
                      action="{% url 'play_edit' play.id %}">


                    {% csrf_token %}

                    <div class="form-group">
                        <label class="col-sm-2 col-sm-2 control-label">剧目名称</label>
                        <div class="col-sm-10">
                            <input value="{{ play.name }}" type="text" name="name" id="name2" class="form-control" placeholder="请输入演出厅名称">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 col-sm-2 control-label">上映日期</label>
                        <div class="col-sm-10">
                            <input type="date" value="" name="play_time" id="play_time"></div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 col-sm-2 control-label">时长</label>
                        <div class="col-sm-10">
                            <input type="text" value="{{ play.length }}" name="length" class="form-control round-form" placeholder="分钟">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 col-sm-2 control-label">导演</label>
                        <div class="col-sm-10">
                            <input type="text" value="{{ play.director }}" name="director" class="form-control round-form">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 col-sm-2 control-label">主演</label>
                        <div class="col-sm-10">
                            <input type="text" value="{{ play.actors }}" name="actors" class="form-control round-form">
                            <span class="help-block">各个演员名字之间用","隔开</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 col-sm-2 control-label">地区</label>
                        <div class="col-sm-10">
                            <input type="text" value="{{ play.area }}" name="area" class="form-control round-form">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 col-sm-2 control-label">剧目类型</label>
                        <div class="col-sm-10">
                            <select class="form-control"  name="types" multiple>
                                {% for type in types %}
                                    {#                                            获取值#}
                                    {#                                          <option id="{{ type.id }}">{{ type.name }}</option>#}
                                    {#                                        获取id#}

                                    {% if type in play.types.all %}


                                    <option selected="selected" value="{{ type.id }}">{{ type.name }}</option>
                                    {% else %}
                                        <option value="{{ type.id }}">{{ type.name }}</option>

                                    {% endif %}
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 col-sm-2 control-label">简介</label>
                        <div class="col-sm-10">
                            <textarea name="desc"  rows="10" cols="100" class="vLargeTextField">{{ play.desc }}</textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-10 col-lg-offset-2">
                            <input class="btn btn-default" type="submit" value="添加剧目">

                        </div>

                    </div>


                </form>

    <!--main content end-->
    <script>

        var time="{{ play.play_time.year }}"+"-";
        var month={{ play.play_time.month }};
        if (month<10)
            time=time+"0";
        time=time+month+"-"
        var day={{ play.play_time.day }};
        if (day<10)
            time=time+"0";
        time=time+day;
        document.getElementById("play_time").value=time


    </script>
{#    <script>#}
{#        function ed_a() {#}
{#            let dt;#}
{#            $.ajax({#}
{#                url: '{% url 'get_data' %}',#}
{#                success: function (data) {#}
{##}
{#                    alert(data['name']);#}
{#                    $("#name2").text(data['name']);#}
{#                    //alert(document.getElementById('name2').value+"123123123");#}
{#                    //document.getElementById('name2').value = "77858777";#}
{#                    //alert(data['name']);#}
{#                    dt=data['name'];#}
{#                    alert(dt);#}
{#                    document.getElementById('name2').value ="111";#}
{##}
{##}
{#                },#}
{#                error: function () {#}
{#                    alert('11111')#}
{##}
{#                }#}
{#            });#}
{#            document.getElementById('name2').value = "222";#}
{##}
{#                    while (!dt);#}
{#                    alert(dt);#}
{##}
{##}
{#        }#}
{#        ed_a();#}
{#    </script>#}

{% endblock %}